:root {
	/*
	  Hello there, fellow code-surfer! 🏄‍♂️
	  I'm setting up a new, unified color system to make our app look fabulous
	  in both light and dark modes. Say goodbye to rogue hex codes!
	*/

	/* Theme colors (assumed to be set via JS or in index.html) */
	--theme: #00aabb;
	--theme-dark: var(--themeDark, #007788);

	/* Semantic Filetype Colors */
	--color-file-js: #f0db4f;
	--color-file-css: #2965f1;
	--color-file-html: #e34c26;
	--color-file-php: #777bb3;	

	/* State & Feedback Colors */
	--color-success: #4caf50;
	--color-error: #f44336;
	--color-warning: #ffc107;
	--color-warning-dark: #ffa000;

	/* Diff Highlight Colors */
	--diff-green: rgb(128,164,128);
	--diff-red: rgba(164,128,128);
	--diff-green-soft: rgba(0,120,0,0.15);
	--diff-red-soft: rgba(120,0,0,0.15);
	--diff-grey: #777777;

	/* Sizing & Spacing */
	--animRate: 10ms;
	--tabRadius: 4px 4px 0 0;
	--tabHeight: 37px;
	--menuHeight: 34px;
	--statusHeight: 34px;
	--editorTop: calc(var(--tabHeight));
	--buttonBorder: 8px;
	--borderRadius: 8px;

	/* Fonts */
	--font-sans: system-ui, roboto, arial, sans;
	--font-mono: 'roboto mono', monospace;

	/* --- Light Mode Palette --- */
	--bg-primary: #D6D8DA;
	--bg-secondary: #C2C4C6;
	--bg-tertiary: #B8BABF;
	--bg-overlay: rgba(0,0,0,0.5);
	--bg-code: #E3E5EE;
	--bg-terminal: #222222;
	--bg-modal: #fafafa;

	--text-primary: #3A3A3A;
	--text-secondary: #5A5A5A;
	--text-muted: #7A7A7A;
	--text-inverted: #ffffff;

	--border-primary: #A9ADB1;
	--border-secondary: #B8BABF;
	--icon-color: #2b2b2b;
	--shadow-color: rgba(0,0,0,0.1);

	/* Highlight.js Colors for Light Mode (Chrome-inspired) */
	--hljs-bg: var(--bg-code);
	--hljs-text: var(--text-primary);
	--hljs-comment: #236e24;
	--hljs-keyword: #930F80;
	--hljs-selector: #008393;
	--hljs-attribute, #0089cd;
	--hljs-number: #0000CD;
	--hljs-string: #1A1AA6;
	--hljs-function: #0000A2;
	--hljs-variable: #318495;
	--hljs-class: var(--hljs-text);
}

a,
a:visited {
	color: var(--theme);
	text-decoration:none;
}

#ace_settingsmenu, #kbshortcutmenu {
	top: var(--editorTop);
	bottom: var(--menuHeight);
	box-shadow:none;
	width: 400px;
}

tr.ace_optionsMenuEntry { line-height:1.5em; font-size:14px; }

button { border:0; }

body {
	font-family: var(--font-sans);
	font-size:13px;
    overflow: hidden;
	background:var(--bg-primary);
	margin:0; padding:0;
}

/*ui-tab-item:not([active])::after { 
    display:inline-block;
    position:absolute;
    opacity:1;
    width:1px;
    height:20px;
    margin-top:4px;
    content: '';
    width:2px;
    overflow:hidden;
    background-color:var(--themeDark);
    transition: opacity 200ms ease-in-out;
}*/

/*ui-tab-item[active] + ui-tab-item::after { opacity:0; }*/

ui-tabbar[slim] > ui-tab-item {
	background: none;
	color: inherit;
	border-style: solid; /* a tab's border color should be the theme-dark color */
	border-color: var(--bg-tertiary);
	border-width: 0 1px;
	margin-left: -1px;
	transition: background 150ms ease-in-out, margin 100ms ease-in-out;
	min-width:48px;
}
ui-tabbar[slim] > ui-tab-item:first-of-type {
	margin-left: 0;
}
ui-tabbar[slim] > ui-tab-item[active] {
	background: var(--theme-dark);
	color: var(--text-inverted);
	position: relative;
	z-index: 1;
}
.current ui-tabbar[slim] > ui-tab-item[active] {
	border-radius: 4px 4px 0 0;
	background: var(--theme);
	border-color: var(--theme); /* The border color for the current tab should be the theme color */
}

/*ui-tabbar[slim]>ui-tab-item:hover+ui-tab-item { background: var(--dark);  }*/
ui-tabbar[slim]>ui-tab-item:not([active]):hover {
	background: var(--bg-tertiary);
}
ui-tabbar[slim]>ui-tab-item[active]:hover {
	filter:brightness(1.1);
}
ui-tab-item:hover::after {
	opacity:0;
}

ui-tab-item.drop-highlight {
    /* Removed box-shadow to eliminate outline border */
}

#mainContent {
    position: fixed;
	opacity:1;
	transition:opacity 333ms;
    margin: 0;
    top: var(--editorTop);
    bottom: calc( var(--statusHeight)  +  2px );
    left: 0;
    right: 0;
    box-shadow: 0 0 10px var(--shadow-color);
    background: var(--bg-code);

    user-select:none;
    -webkit-user-select:none;
}



.holder-overlay {
    position: absolute;
    top: var(--tabHeight);
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--bg-overlay);
    z-index: 10;
    visibility: hidden;
}

.drag-over > .holder-overlay {
    visibility: visible;
}

#leftHolder,
#rightHolder {
	opacity:1;
	transition:opacity 333ms;
    margin: 0;
    position: absolute;
    top: 0px;
    bottom: 0px;
    line-height:1.3em;
    box-shadow: 0 0 10px var(--shadow-color);
    background:rgba(0,0,0,0.2);
    
    user-select:none;
    -webkit-user-select:none;
}
#leftHolder {
    left: 0;
    right: 0;
}

#rightHolder {
    width: 0;
}
body:not(.showSplitView) #rightHolder {
	pointer-events:none;
}

#leftEdit,
#rightEdit {
	z-index:1;
    margin: 0;
    width: calc(100% - 0.3em);
    height: calc((100% - (var(--menuHeight) + 0.66em)) );
    /*height: calc(100% - 0.66em);*/
    
    user-select:none;
    -webkit-user-select:none;

}

#rightEdit {
	left: 0px;
}

#leftMedia,
#rightMedia {
	top: calc(var(--menuHeight) + 6px);
    left:0px;
    right:0px;
    bottom:0px;
}



.ace_scrollbar::-webkit-scrollbar,
ui-file-list .inner::-webkit-scrollbar,
ui-menu::-webkit-scrollbar,
#ace_settingsmenu::-webkit-scrollbar,
.xterm-viewport::-webkit-scrollbar {
	width: .66em; height: .66em;
}

.ace_scrollbar-v::-webkit-scrollbar-track,
ui-file-list .inner::-webkit-scrollbar-track,
ui-menu::-webkit-scrollbar-track,
.darkmode #ace_settingsmenu::-webkit-scrollbar-track,
.xterm-viewport::-webkit-scrollbar-track {
	width: .66em; height: .66em;
	box-shadow: inset 0 0 6px var(--shadow-color);
}

.ace_scrollbar::-webkit-scrollbar-thumb,
ui-file-list .inner::-webkit-scrollbar-thumb,
ui-menu::-webkit-scrollbar-thumb,
.darkmode #ace_settingsmenu::-webkit-scrollbar-thumb,
.xterm-viewport::-webkit-scrollbar-thumb {
	background-color: var(--text-muted);
	border-radius:4px;
}

ui-editor-holder .ace_editor {
	top: calc( var(--menuHeight) + 6px);
    bottom: 0px;
    right: 4px;
    left: 0px;
    z-index:1;
    position: absolute;
}


/*#scratchpad-editor.ace_editor {
	top: 0px;
}*/

#leftHolder.loading {
	opacity:0;
}




header {
	background: var(--theme);
}

header>* {
	display:inline-block;
}

header button {
	font-weight:bold;
	background: var(--theme);
	height:30px;
	margin:3px 0;
	pointer-events:none; /* The 'close' button in the header should not be interactive. */
	border-right:1px solid var(--shadow-color);
	margin-right:5px;
}

header button img {
	height:32px;
	vertical-align:middle;
	margin-top:-4px;
}

header nav {
	/*font-family:roboto, arial, sans;*/
	color:var(--text-inverted); }

ui-actionbar#menu {
	min-height: env(titlebar-area-height, 32px);
	margin-left: env(titlebar-area-x, 0);
	z-index:6;
	background: var(--theme);
	-webkit-app-region: drag;
	app-region: drag;
}

ui-actionbar#menu>ui-inline:first-of-type {
	color:var(--text-inverted);
	border-right: 1px solid var(--shadow-color);
	padding-right:8px;
}

ui-actionbar#menu ui-inline:first-of-type img {
	margin-top: -4px;
}

ui-actionbar[slim]#leftTabs,
ui-actionbar[slim]#rightTabs,
ui-actionbar[slim]#fileActions {
	padding:5px 0 0 0;
}

ui-actionbar#menu ui-button {
	color:var(--text-inverted);
	-webkit-app-region: no-drag;
	app-region: no-drag;

}

ui-actionbar#menu ui-panel ui-button {
	color:var(--text-primary);
}

ui-button ui-icon {
    color: inherit;
    font-family: "Material Symbols Outlined";
}
ui-button {
    margin:0 2px;
    border-radius: var(--buttonBorder);
}

ui-button:hover {
    filter: brightness(0.92)
}

ui-button.themed {
    border-radius: 8px;
    background: var(--bg-secondary);
    color: var(--text-primary);
}
ui-button.themed ui-icon {
    color: inherit;
}

ui-button.cancel {
	border-radius: 8px;
    color: var(--text-secondary);
    background: var(--bg-tertiary);
}


ui-panel.slideUp {
    transition: margin-bottom 200ms ease-in-out, opacity 200ms ease-in-out;
    margin-bottom: -50vh;
    opacity:0;
    pointer-events: none;
}

ui-panel.slideUp[active] {
    margin-bottom: 0vh;
    opacity:1;
    pointer-events: initial;
}

ui-panel.slideDown {
    transition: margin-top 200ms ease-in-out, opacity 200ms ease-in-out;
    margin-top: -50vh;
    opacity:0;
    pointer-events: none;
}

ui-panel.slideDown[active] {
    margin-top: 0vh;
    opacity:1;
    pointer-events: initial;
}

ui-menu[slim] ui-menu-item[icon="done"]:not(:hover) {
	color: var(--text-inverted);
	background:var(--theme);
}
ui-menu[slim] ui-menu-item[icon="done"]:not(:hover) ui-icon {
	color: var(--text-inverted);
}

[slim] ui-menu-item[icon="done"]:not(:hover) {
	color: var(--text-inverted);
	background:var(--theme);
}
ui-menu[slim] ui-menu-item[icon="done"]:not(:hover) ui-icon {
	color: var(--text-inverted);
}

ui-file-item[active] {
	background: var(--theme);
	color: var(--text-inverted);
}

ui-file-item[icon=javascript] ui-icon:first-child { color: var(--color-file-js); }
ui-file-item[icon=css] ui-icon:first-child { color: var(--color-file-css); }
ui-file-item[icon=html] ui-icon:first-child { color: var(--color-file-html); }
ui-file-item[icon=php] ui-icon:first-child { color: var(--color-file-php); }
ui-file-item[icon=data_object] ui-icon:first-child { color: var(--icon-color); opacity: 0.75; }
ui-file-item[icon=image_not_supported] ui-icon:first-child { color: var(--icon-color); opacity: 0.33; }

ui-file-item[active] ui-icon:first-child { color: var(--text-inverted); }

/* Tab icon colors for inactive tabs, mirroring file list */
ui-tab-item[data-status-icon-type=javascript]:not([active]) .status-icon { color: var(--color-file-js); }
ui-tab-item[data-status-icon-type=css]:not([active]) .status-icon { color: var(--color-file-css); }
ui-tab-item[data-status-icon-type=html]:not([active]) .status-icon { color: var(--color-file-html); }
ui-tab-item[data-status-icon-type=php]:not([active]) .status-icon { color: var(--color-file-php); }
ui-tab-item[data-status-icon-type=data_object]:not([active]) .status-icon { color: var(--icon-color); }
ui-tab-item[data-status-icon-type=code]:not([active]) .status-icon { color: var(--icon-color); }
ui-tab-item[data-status-icon-type=image]:not([active]) .status-icon { color: var(--icon-color); }

/* Hide status icons in AI and Terminal session tabs for a cleaner look */
.ai-session-tabs ui-tab-item .status-icon,
.terminal-session-tabs ui-tab-item .status-icon {
    display: none;
}

.ai-session-tabs ui-tab-item,
.terminal-session-tabs ui-tab-item {
    padding-left: 8px; /* Adjust padding to compensate for the removed icon */
}

#leftTabs,
#rightTabs{
	position:absolute;
	top:0;
	left:0;
	right:0;
	background: var(--bg-primary);
	display:flex;
	overflow-x: auto;
    box-sizing: border-box;
    border-bottom:2px solid var(--theme-dark);
    padding-right:40px;
}

ui-tabbar.show-split-view-indicator::after {
    content: '';
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 100px; /* This is the 100px region */
    background: var(--diff-green-soft); /* Light green overlay */
    pointer-events: none; /* Ensure it doesn't interfere with drag events */
    display: block;
}

.current #leftTabs,
.current #rightTabs {
    border-bottom:2px solid var(--theme);
}

body.showSplitView #leftTabs {
	padding-right:2px;
}


#sidebar {
	z-index:5;
	opacity:0;
	background:var(--bg-primary);
	position:absolute;
	width:256;
	left:-256;
	top:var(--menuHeight) !important;
	bottom: var(--statusHeight);
	overflow:visible;
	pointer-events:none;
}

#mainContent, #sidebar, #statusbar, ui-actionbar, ui-file-list {
	transition:left var(--animRate), right var(--animRate), width var(--animRate), opacity var(--animRate), background var(--animRate), color var(--animRate);
}

#leftHolder, #rightHolder {
	transition:width var(--animRate)
}

#statusbar {
	position:absolute;
	left:0;
	right:0;
	bottom:0 !important;
	top:auto !important;
	z-index:10;
}
#statusbar #cursor_pos {
	margin-left: 8px;
}


#statusbar ui-button {
	color: inherit;
}
#statusbar ui-button ui-icon {
	color: inherit;
}

#ace_settingsmenu *,
#kbshortcutmenu *{
	color: inherit;
}

#toggleSplitView {
	position:fixed;
	z-index:5;
	top: var(--menuHeight);
	right:0px;
	background: var(--bg-primary);
}

#drawer {
	z-index:9;
    user-select:none;
    -webkit-user-select:none;
}

.darkmode {
	/* --- Dark Mode Palette --- */
	--bg-primary: #384144;
	--bg-secondary: #455155;
	--bg-tertiary: #2a3235;
	--bg-overlay: rgba(0,0,0,0.5);
	--bg-code: rgba(0,0,0,0.25);
	--bg-modal: #676f71;
	--text-primary: #dadada;
	--text-secondary: #afafaf;
	--text-muted: #777777;
	/* Inverted text is for use on theme-colored backgrounds */
	--text-inverted: #ffffff;
	--border-primary: #555555;
	--border-secondary: #444444;
	--icon-color: #2b2b2b;
	--shadow-color: rgba(0,0,0,0.25);

	/* Highlight.js Colors for Dark Mode (Code-inspired) */
	--hljs-bg: var(--bg-code);
	--hljs-text: var(--text-primary);
	--hljs-comment: #666666;
	--hljs-keyword: #F92672;
	--hljs-selector: #87df00;
	--hljs-attribute, #85e4f5;
	--hljs-number: #AE81FF;
	--hljs-string: #ccffbb;
	--hljs-function: #A6E22E;
	--hljs-variable: #A6E22E;
	--hljs-class: var(--hljs-text);
}

.darkmode,
.darkmode body,
.darkmode ui-actionbar {
	background-color: var(--bg-primary);
	color: var(--text-primary);
}

.darkmode #ace_settingsmenu input,
.darkmode #ace_settingsmenu select,
.darkmode #ace_settingsmenu button {
	background: var(--bg-secondary);
	color: var(--text-primary);
}

.darkmode ui-tabbar[slim]>ui-tab-item:not([active]):hover {
	background: var(--bg-tertiary);
}


.showSidebar #sidebar {
	opacity:1;
	left: 0;
	pointer-events:auto;
}

#omni {
	position:fixed;
	z-index:10;
	width:400px;
	height:90px;
	left:50%;
	top:4px;
	margin-left:-200px;
	border-radius:4px;
	box-shadow: 0px 5px 10px var(--shadow-color);
	background:var(--bg-modal);
	
	transition: transform 200ms ease-in-out, opacity 200ms ease-in-out;
	transform: scale(1,0);
	opacity:0;
}

.ace_search {
	position:fixed;
	z-index:10;
	width:600px;
	height:80px;
	left:50%;
	top:4px;
	margin-left:-300px;
	border-radius:4px !important;
	box-shadow: 0px 5px 10px var(--shadow-color);
	background:var(--bg-primary);
}


#omni.active {
    transform: scale(1,1);
    opacity:1;
}

#omni ui-block {
	text-align:center;
	padding:4px 8px;
}

#omni ui-block:first-of-type {
	font-size:1.5em;
}
#omni ui-inline {
	text-align:center;
}

#omni ui-input {
	display:block;
	box-sizing: border-box;
	width:100%;
	padding:4px 16px;
}

#omni ui-input input {
	width:100%;
	border:none;
	border-bottom:2px solid var(--theme);
	outline:none;
	font-size: 1.3em;
}

#omni .results {
	position:fixed;
	width:400px;
	max-height:400px;
	overflow:auto; /* Allow scrolling for long lists */
	box-shadow: 0px 5px 10px var(--shadow-color);
	background:var(--bg-primary);
	top: 100px;
	z-index:10;
	
	border-radius:4px;
}
#omni .results ui-block {
	color: var(--text-primary); /* Darker text for better contrast */
	padding: 8px 12px;
	cursor: pointer;	
	text-align:left;
	border-bottom: 1px solid var(--border-secondary);
}

/*#omni .results ui-block.active {*/
/*	color: var(--low);*/
/*	background: var(--high);*/
/*}*/

#omni .results ui-block:hover {
	background-color: var(--bg-secondary);
}

#omni .results ui-block.active {
	color:var(--text-inverted);
	background: var(--theme);
	cursor:pointer;
}
#omni .results ui-block b {
	background: rgba(0,0,0,0.05);
}
#omni .results ui-block small {
	font-size: 0.9em; /* Larger path font */
	opacity: 0.8;
}
#omni .results ui-block.active small {
	opacity: 0.9;
}

@media (max-width:799px) {
	.showSidebar #mainContent { left: 0; }
}

.background-element {
    position: absolute;
    top: var(--tabHeight);
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    overflow: hidden;
}

#leftMedia,
#rightMedia {
	top: var(--tabHeight);
    left:0px;
    right:4px;
    bottom:0px;
}

#leftMedia,
#rightMedia,
.ace_editor {
    z-index: 1;
}

#drawer {
	position:fixed;
	bottom:0;
	left:0;
	right:0;
	width:100%; /* The drawer should be full width */
	background: var(--bg-primary);
	box-shadow: 0 -5px 5px var(--shadow-color);
}

#sidebar {
	display: flex;
	flex-direction: row;
    user-select:none;
    -webkit-user-select:text;

}

#sidebar ui-icon-tabbar {
	flex-shrink: 0;
    user-select:none;
    -webkit-user-select:none;
    background: linear-gradient(to bottom, var(--theme-dark) 33%, var(--theme));
}

#sidebar-panels-container {
	flex-grow: 1;
	position: relative;
	overflow: hidden;
}

.background-element img {
	opacity:0.25;
    filter: grayscale(100%);
}

.background-element .caption {
    margin-top: 1em;
    white-space: pre-wrap;
}


.notice-bar {
    position: absolute;
    /*top: calc(var(--tabHeight) + 8px); /* Move to top with 8px offset */
    bottom:32px;
    left: 32px; /* 8px offset from left */
    right: 32px; /* 8px offset from right */
    background-color: var(--bg-secondary); /* Dark background */
    color: var(--text-primary); /* White text */
    padding: 6px;
    display: flex;
    justify-content: space-between; /* Space between items */
    align-items: center;
    gap: 6px; /* Space between items */
    z-index: 1000; /* Ensure it's on top */
    box-shadow: 0 2px 10px var(--shadow-color); /* Subtle shadow (changed from bottom to top) */
    border-radius: 5px; /* Slightly rounded corners */
    border: 1px solid var(--theme);
}

.notice-bar span {
    flex-grow: 1; /* Allow text to take available space */
    text-align: center;
}

.notice-bar button {
    background-color: var(--theme); /* Blue button */
    color: var(--text-inverted);
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.9em;
}


.notice-bar button:hover {
    background-color: var(--theme-dark); /* Darker blue on hover */
}

#sidebar-panels-container {
	position: relative;
	height: 100%;
	width: 100%;
}

ui-sidebar-panel {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	/*overflow: hidden;*/
	/* By default, panels are not displayed, which is handled by the component's logic. */
}

@keyframes panel-fade-in {
	from { opacity: 0; }
	to   { opacity: 1; }
}

ui-sidebar-panel[active] {
	animation: panel-fade-in 200ms ease-in-out;
}

/*
  Ensure the files panel lays out its children (actions bar, file list) vertically
  and allows the file list to grow and fill the available space so it can scroll.
*/
#sidebar-panels-container > ui-sidebar-panel:first-of-type[active] {
	display: flex;
	flex-direction: column;
}
#sidebar-panels-container > ui-sidebar-panel:first-of-type[active] > ui-file-list {
	flex: 1;
	min-height: 0; /* Prevents the flex item from overflowing its container */
}

ui-sidebar-panel#ai-panel[active] {
	display: flex;
}

ui-sidebar-panel#terminal-panel[active] {
    display: flex;
}

ui-sidebar-panel pre {
	max-width: 100%;
	overflow-x: auto;
	white-space: pre; /* The pre element should preserve whitespace. */ 
	background-color: var(--hljs-bg, var(--bg-code));
	color: var(--hljs-text, var(--text-primary));
	border-radius: 8px;
	padding: 8px;
}

ui-sidebar-panel ui-file-list::-webkit-scrollbar,
ui-sidebar-panel .conversation-area::-webkit-scrollbar,
ui-sidebar-panel pre::-webkit-scrollbar {
	width: .66em; height: .66em;
}
ui-sidebar-panel ui-file-list::-webkit-scrollbar-track,
ui-sidebar-panel .conversation-area::-webkit-scrollbar-track,
ui-sidebar-panel pre::-webkit-scrollbar-track {
	width: .66em; height: .66em;
	box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
}
ui-sidebar-panel ui-file-list::-webkit-scrollbar-thumb,
ui-sidebar-panel .conversation-area::-webkit-scrollbar-thumb,
ui-sidebar-panel pre::-webkit-scrollbar-thumb {
	background-color: darkgrey;
	border-radius:4px;
}


.terminal-panel-container { /* Renamed from ui-terminal-panel */
    /*display: flex; */ /* removed as this is handled by the active attribute*/
    flex-direction: column;
    height: 100%; /* Ensure the panel itself takes full height */
}

/* Styles for the terminal content wrapper within the panel */
ui-sidebar-panel.terminal-panel-container .terminal-containers-wrapper {
    flex: 1; /* Allows the terminal content area to grow and fill available space */
    min-height: 0; /* Important for flex items to shrink correctly */
    position: relative; /* For absolutely positioned terminal instances */
}

/* Ensure individual terminal instance containers fill their space */
ui-sidebar-panel.terminal-panel-container .terminal-containers-wrapper .terminal-instance-container {
    position: absolute; /* Needed for xterm.js to size correctly within a relative parent */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--bg-terminal);
    padding:2px;
}

ui-tabbar.tabs-inverted {
	display: flex; /* Tabs should be laid out in a row. */
    overflow-x: auto;
    box-sizing: border-box;
    border-top: 3px solid var(--theme-dark);
    box-shadow: 0 -5px 10px var(--shadow-color);
    z-index: 2;
}

.conduit-setup-guide .conduit-notice {
    background-color: color-mix(in srgb, var(--color-warning) 15%, transparent);
    border: 1px solid var(--theme-dark);
    border-radius: 5px;
    padding: 1em;
    margin: 1em 0;
    line-height: 1.5;
}

.conduit-setup-guide .conduit-notice strong {
    color: var(--theme);
}

.conduit-setup-guide .conduit-notice.windows-unsupported {
    background-color: color-mix(in srgb, var(--color-error) 10%, transparent); /* Soft red */
    border-color: #a12c36;
    color: var(--high);
}

.conduit-setup-guide .conduit-notice.windows-unsupported strong {
    color: #e75c6a;
}

.conduit-setup-guide .conduit-notice a,
.conduit-setup-guide .conduit-notice a:visited {
    color: var(--theme);
    text-decoration: underline;
}

.install-output {
    background-color: var(--bg-terminal);
    color: var(--text-secondary);
    padding: 8px;
    border-radius: 4px;
}

.ai-background-element {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: var(--text-secondary);
}
.ai-background-element .caption {
    margin-top: 1em;
    white-space: pre-wrap;
    line-height: 1.5;
}

.file-list-background-element {
    position: absolute;
    top: 38px; /* Position below the file actions bar */
    left: 0;
    width: 100%;
    height: calc(100% - 38px);
    z-index: 0;
    display: none; /* Initially hidden, controlled by JS */
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: var(--text-secondary);
}

.file-list-background-element .caption {
    margin-top: 1em;
    white-space: pre-wrap;
    line-height: 1.5;
}


.terminal-background-element {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: var(--text-secondary);
}
.terminal-background-element .caption {
    margin-top: 1em;
    white-space: pre-wrap;
    line-height: 1.5;
}
.spinner-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 1em;
}
.loading-spinner {
    border: 4px solid var(--border-secondary);
    border-radius: 50%;
    border-top-color: var(--theme);
    width: 24px;
    height: 24px;
    animation: spin 1s linear infinite;
}


/* "Inverted" tabs are now styled to sit on top of the prompt area */
ui-tabbar.tabs-inverted[slim] > ui-tab-item {
    margin-top: 0;
    margin-bottom: 4px; /* Sits flush with the bottom of the container */
}

ui-tabbar[slim] > ui-tab-item[is-changed] {
	background:var(--diff-red-soft);
}

/* Override to ensure bottom corners are square */
ui-tabbar.tabs-inverted[slim] > ui-tab-item,
ui-tabbar.tabs-inverted[slim] > ui-tab-item[active] {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
    /*background: var(--dark); */
    /*color: var(--button-text-color);*/
}

ui-tabbar.tabs-inverted[slim] > ui-tab-item[active] {
    border-radius: 0 0 8px 8px; /* Rounded BOTTOM corners */
}
